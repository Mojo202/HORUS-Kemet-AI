<!DOCTYPE html>
<html>
<head>
    <title>All Fetched Agents</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { border-bottom: 2px solid #007cba; padding-bottom: 10px; margin-bottom: 20px; }
        .nav-links { margin-bottom: 20px; }
        .nav-links a { color: #007cba; text-decoration: none; margin-right: 15px; }
        .nav-links a:hover { text-decoration: underline; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #f8f9fa; font-weight: bold; }
        tr:hover { background-color: #f8f9fa; }
        .status-success { color: #28a745; }
        .status-error { color: #dc3545; }
        .agent-id { font-family: monospace; font-size: 0.9em; }
        .url { max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    </style>
</head>
<body>
    <div class="nav-links">
        <a href="/">‚Üê Back to Fetcher</a>
    </div>
    
    <div class="header">
        <h1>üìã All Fetched Agents</h1>
        <p>{{ agents|length }} agent(s) fetched</p>
    </div>
    
    {% if agents %}
    <table>
        <thead>
            <tr>
                <th>Agent ID</th>
                <th>URL</th>
                <th>Status</th>
                <th>Fetch Time</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for agent in agents %}
            <tr>
                <td class="agent-id">{{ agent.agent_id or 'N/A' }}</td>
                <td class="url" title="{{ agent.url }}">{{ agent.url }}</td>
                <td class="{% if agent.status_code == 200 %}status-success{% else %}status-error{% endif %}">
                    {{ agent.status_code or 'N/A' }}
                </td>
                <td>{{ agent.fetch_time }}</td>
                <td>
                    <a href="/view/{{ agent.timestamp }}">View</a> |
                    <a href="/api/data/{{ agent.timestamp }}">JSON</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No agents fetched yet. <a href="/">Fetch your first agent</a>!</p>
    {% endif %}
</body>
</html>